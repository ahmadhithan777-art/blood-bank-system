<!DOCTYPE html>
<html lang="ar" dir="rtl" id="html-root">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Smart Blood Bank</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    .page { display: none; }
    .page.active { display: block; }
    [lang] { display: none; }
    .lang-active { display: inline; }
    .notification {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 1000;
      max-width: 300px;
    }
  </style>
</head>
<body class="bg-light">
  <!-- Ø§Ù„ØªÙ†Ù‚Ù„ -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-danger">
    <div class="container">
      <a class="navbar-brand" href="#" onclick="showPage('home')">ðŸ©¸ Smart Blood Bank</a>
      <div class="d-flex">
        <select class="form-select form-select-sm" id="langSelect" style="width:auto;" onchange="setLang(this.value)">
          <option value="ar">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
          <option value="en">English</option>
          <option value="fr">FranÃ§ais</option>
          <option value="tr">TÃ¼rkÃ§e</option>
        </select>
      </div>
    </div>
  </nav>

  <!-- Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
  <div id="home" class="page active container py-4">
    <h1 class="text-center" id="welcome"></h1>
    <div class="alert alert-warning text-center mt-3" id="demoNote"></div>
    <div class="text-center">
      <button class="btn btn-primary m-2" onclick="showPage('register')" id="btnRegister"></button>
      <button class="btn btn-danger m-2" onclick="showPage('requests')" id="btnRequest"></button>
    </div>
  </div>

  <!-- ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù…ØªØ¨Ø±Ø¹ÙŠÙ† -->
  <div id="register" class="page container py-4">
    <h2 id="registerTitle"></h2>
    <form id="donorForm" class="mt-3">
      <input type="text" id="name" class="form-control mb-2" placeholder="" required>
      <select id="blood" class="form-control mb-2" required>
        <option value="">[blood_type_ar]</option>
        <option value="A+">A+</option>
        <option value="A-">A-</option>
        <option value="B+">B+</option>
        <option value="B-">B-</option>
        <option value="AB+">AB+</option>
        <option value="AB-">AB-</option>
        <option value="O+">O+</option>
        <option value="O-">O-</option>
      </select>
      <input type="text" id="city" class="form-control mb-2" placeholder="" required>
      <input type="tel" id="phone" class="form-control mb-2" placeholder="" required>
      <input type="number" id="age" class="form-control mb-2" min="18" max="65" placeholder="" required>
      <button type="submit" class="btn btn-success" id="btnSubmit"></button>
    </form>
  </div>

  <!-- Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø¯Ù… -->
  <div id="requests" class="page container py-4">
    <h2 id="requestTitle"></h2>
    <form id="requestForm" class="mt-3">
      <h5 id="patientInfo"></h5>
      <input type="text" id="pName" class="form-control mb-2" placeholder="" required>
      <input type="number" id="pAge" class="form-control mb-2" placeholder="" required>
      <textarea id="pCondition" class="form-control mb-2" rows="2" placeholder="" required></textarea>

      <h5 class="mt-3" id="hospitalInfo"></h5>
      <input type="text" id="hName" class="form-control mb-2" placeholder="" required>
      <input type="text" id="hCity" class="form-control mb-2" placeholder="" required>

      <select id="reqBlood" class="form-control mb-2" required>
        <option value="">[blood_type_ar]</option>
        <option value="A+">A+</option>
        <option value="A-">A-</option>
        <option value="B+">B+</option>
        <option value="B-">B-</option>
        <option value="AB+">AB+</option>
        <option value="AB-">AB-</option>
        <option value="O+">O+</option>
        <option value="O-">O-</option>
      </select>
      <input type="number" id="bags" class="form-control mb-2" min="1" placeholder="" required>
      <button type="submit" class="btn btn-danger" id="btnReqSubmit"></button>
    </form>
  </div>

  <div id="notification" class="notification alert alert-success" style="display:none;"></div>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-database-compat.js"></script>

  <script>
    // ðŸ”‘ STEP 1: PASTE YOUR FIREBASE CONFIG HERE (from Project settings)
    const firebaseConfig = {
      apiKey: "AIzaSy...",
      authDomain: "blood-bank-system-2faf0.firebaseapp.com",
      databaseURL: "https://blood-bank-system-2faf0-default-rtdb.firebaseio.com",
      projectId: "blood-bank-system-2faf0",
      storageBucket: "blood-bank-system-2faf0.appspot.com",
      messagingSenderId: "1064247189778",
      appId: "1:1064247189778:web:e06db80bacc39d117953cb"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // Translations
    const translations = {
      ar: {
        welcome: "Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù†Ø¸Ø§Ù… Ø¨Ù†Ùƒ Ø§Ù„Ø¯Ù… Ø§Ù„Ø°ÙƒÙŠ",
        demoNote: "ØªÙ†ÙˆÙŠÙ‡: Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ© ÙˆÙ„Ø§ ØªÙ…Ø«Ù„ Ø£Ø´Ø®Ø§ØµÙ‹Ø§ Ø­Ù‚ÙŠÙ‚ÙŠÙŠÙ†.",
        btnRegister: "ØªØ³Ø¬ÙŠÙ„ Ù…ØªØ¨Ø±Ø¹",
        btnRequest: "Ø·Ù„Ø¨ Ø¯Ù…",
        registerTitle: "ØªØ³Ø¬ÙŠÙ„ Ù…ØªØ¨Ø±Ø¹ Ø¬Ø¯ÙŠØ¯",
        name: "Ø§Ù„Ø§Ø³Ù…",
        blood_type: "ÙØµÙŠÙ„Ø© Ø§Ù„Ø¯Ù…",
        city: "Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©",
        phone: "Ø§Ù„Ù‡Ø§ØªÙ",
        age: "Ø§Ù„Ø¹Ù…Ø±",
        btnSubmit: "ØªØ³Ø¬ÙŠÙ„",
        requestTitle: "Ø·Ù„Ø¨ Ø¯Ù… Ø¬Ø¯ÙŠØ¯",
        patientInfo: "Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø±ÙŠØ¶",
        hospitalInfo: "Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ´ÙÙ‰",
        pName: "Ø§Ø³Ù… Ø§Ù„Ù…Ø±ÙŠØ¶",
        pAge: "Ø¹Ù…Ø± Ø§Ù„Ù…Ø±ÙŠØ¶",
        pCondition: "Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„ØµØ­ÙŠØ©",
        hName: "Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ´ÙÙ‰",
        hCity: "Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©",
        reqBlood: "ÙØµÙŠÙ„Ø© Ø§Ù„Ø¯Ù… Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©",
        bags: "Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙƒÙŠØ§Ø³ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©",
        btnReqSubmit: "Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø§Ù„Ø¯Ù…",
        successDonor: "ØªÙ… ØªØ³Ø¬ÙŠÙ„Ùƒ Ø¨Ù†Ø¬Ø§Ø­!",
        successRequest: "ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø§Ù„Ø¯Ù…!"
      },
      en: {
        welcome: "Welcome to Smart Blood Bank",
        demoNote: "Note: Data is for demo only.",
        btnRegister: "Register Donor",
        btnRequest: "Request Blood",
        registerTitle: "New Donor Registration",
        name: "Name",
        blood_type: "Blood Type",
        city: "City",
        phone: "Phone",
        age: "Age",
        btnSubmit: "Register",
        requestTitle: "New Blood Request",
        patientInfo: "Patient Info",
        hospitalInfo: "Hospital Info",
        pName: "Patient Name",
        pAge: "Patient Age",
        pCondition: "Medical Condition",
        hName: "Hospital Name",
        hCity: "City",
        reqBlood: "Required Blood Type",
        bags: "Number of Bags",
        btnReqSubmit: "Submit Blood Request",
        successDonor: "Registered successfully!",
        successRequest: "Blood request sent!"
      },
      fr: {
        welcome: "Bienvenue au Smart Blood Bank",
        demoNote: "Avis : DonnÃ©es Ã  titre indicatif uniquement.",
        btnRegister: "Enregistrer un Donateur",
        btnRequest: "Demander du Sang",
        registerTitle: "Nouvel enregistrement de donneur",
        name: "Nom",
        blood_type: "Groupe sanguin",
        city: "Ville",
        phone: "TÃ©lÃ©phone",
        age: "Ã‚ge",
        btnSubmit: "S'inscrire",
        requestTitle: "Nouvelle demande de sang",
        patientInfo: "Informations du patient",
        hospitalInfo: "Informations de l'hÃ´pital",
        pName: "Nom du patient",
        pAge: "Ã‚ge du patient",
        pCondition: "Ã‰tat de santÃ©",
        hName: "Nom de l'hÃ´pital",
        hCity: "Ville",
        reqBlood: "Groupe sanguin requis",
        bags: "Nombre de poches",
        btnReqSubmit: "Soumettre la demande",
        successDonor: "Inscription rÃ©ussie !",
        successRequest: "Demande de sang envoyÃ©e !"
      },
      tr: {
        welcome: "AkÄ±llÄ± Kan BankasÄ±na HoÅŸ Geldiniz",
        demoNote: "UyarÄ±: Veriler yalnÄ±zca demo amaÃ§lÄ±dÄ±r.",
        btnRegister: "BaÄŸÄ±ÅŸÃ§Ä± KaydÄ±",
        btnRequest: "Kan Talebi",
        registerTitle: "Yeni BaÄŸÄ±ÅŸÃ§Ä± KaydÄ±",
        name: "Ad",
        blood_type: "Kan Grubu",
        city: "Åžehir",
        phone: "Telefon",
        age: "YaÅŸ",
        btnSubmit: "KayÄ±t Ol",
        requestTitle: "Yeni Kan Talebi",
        patientInfo: "Hasta Bilgileri",
        hospitalInfo: "Hastane Bilgileri",
        pName: "Hasta AdÄ±",
        pAge: "Hasta YaÅŸÄ±",
        pCondition: "SaÄŸlÄ±k Durumu",
        hName: "Hastane AdÄ±",
        hCity: "Åžehir",
        reqBlood: "Gerekli Kan Grubu",
        bags: "Torba SayÄ±sÄ±",
        btnReqSubmit: "Kan Talebini GÃ¶nder",
        successDonor: "BaÅŸarÄ±yla kaydedildi!",
        successRequest: "Kan talebi gÃ¶nderildi!"
      }
    };

    function setLang(lang) {
      localStorage.setItem('lang', lang);
      const t = translations[lang] || translations.ar;
      document.getElementById('welcome').textContent = t.welcome;
      document.getElementById('demoNote').textContent = t.demoNote;
      document.getElementById('btnRegister').textContent = t.btnRegister;
      document.getElementById('btnRequest').textContent = t.btnRequest;
      document.getElementById('registerTitle').textContent = t.registerTitle;
      document.getElementById('name').placeholder = t.name;
      document.getElementById('city').placeholder = t.city;
      document.getElementById('phone').placeholder = t.phone;
      document.getElementById('age').placeholder = t.age;
      document.getElementById('btnSubmit').textContent = t.btnSubmit;
      document.getElementById('requestTitle').textContent = t.requestTitle;
      document.getElementById('patientInfo').textContent = t.patientInfo;
      document.getElementById('hospitalInfo').textContent = t.hospitalInfo;
      document.getElementById('pName').placeholder = t.pName;
      document.getElementById('pAge').placeholder = t.pAge;
      document.getElementById('pCondition').placeholder = t.pCondition;
      document.getElementById('hName').placeholder = t.hName;
      document.getElementById('hCity').placeholder = t.hCity;
      document.getElementById('reqBlood').placeholder = t.reqBlood;
      document.getElementById('bags').placeholder = t.bags;
      document.getElementById('btnReqSubmit').textContent = t.btnReqSubmit;

      document.getElementById('html-root').dir = (lang === 'ar' ? 'rtl' : 'ltr');
      document.getElementById('html-root').lang = lang;
      document.getElementById('langSelect').value = lang;
    }

    function notify(msg) {
      const n = document.getElementById('notification');
      n.textContent = msg;
      n.style.display = 'block';
      setTimeout(() => n.style.display = 'none', 3000);
    }

    document.getElementById('donorForm').addEventListener('submit', function(e) {
      e.preventDefault();
      const lang = localStorage.getItem('lang') || 'ar';
      const donor = {
        name: document.getElementById('name').value,
        blood: document.getElementById('blood').value,
        city: document.getElementById('city').value,
        phone: document.getElementById('phone').value,
        age: document.getElementById('age').value,
        timestamp: firebase.database.ServerValue.TIMESTAMP
      };
      db.ref('donors').push(donor);
      notify(translations[lang].successDonor);
    });

    document.getElementById('requestForm').addEventListener('submit', function(e) {
      e.preventDefault();
      const lang = localStorage.getItem('lang') || 'ar';
      const request = {
        patientName: document.getElementById('pName').value,
        patientAge: document.getElementById('pAge').value,
        condition: document.getElementById('pCondition').value,
        hospitalName: document.getElementById('hName').value,
        hospitalCity: document.getElementById('hCity').value,
        bloodType: document.getElementById('reqBlood').value,
        bags: document.getElementById('bags').value,
        status: "pending",
        timestamp: firebase.database.ServerValue.TIMESTAMP
      };
      db.ref('requests').push(request);
      notify(translations[lang].successRequest);
    });

    const savedLang = localStorage.getItem('lang') || 'ar';
    setLang(savedLang);
  </script>
</body>
</html>